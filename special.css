:root {
    --bg-dark: #1a0505;
    --bg-rich: #3d0a0a;
    --envelope-velvet: #780000;
    --envelope-flap: #911014;
    --accent-gold: #f5d491;
    --paper-pink: #fff0f3; 
    --ink: #4a0e0e;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body, html {
    width: 100%;
    height: 100%;
    overflow: hidden;
    font-family: 'Playfair Display', serif;
    background: radial-gradient(circle at center, var(--bg-rich) 0%, var(--bg-dark) 100%);
}

#bg-canvas {
    position: fixed;
    inset: 0;
    z-index: 1;
    pointer-events: none;
}

#home {
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: var(--accent-gold);
    transition: 1s ease;
    z-index: 10;
    position: relative;
}

#home h1 {
    font-size: clamp(2.5rem, 8vw, 4.5rem);
    font-style: italic;
    margin-bottom: 2rem;
    text-shadow: 0 0 30px rgba(245, 212, 145, 0.4);
}

#home button {
    padding: 20px 60px;
    font-size: 1.1rem;
    border: 1px solid var(--accent-gold);
    background: transparent;
    color: var(--accent-gold);
    letter-spacing: 6px;
    text-transform: uppercase;
    cursor: pointer;
    transition: 0.3s;
}

#home button:hover {
    background: var(--accent-gold);
    color: var(--bg-dark);
}

#stage {
    display: none;
    position: absolute;
    inset: 0;
    align-items: center;
    justify-content: center;
    z-index: 5;
}

/* ENVELOPE */
.envelope {
    width: min(95vw, 900px); 
    height: min(75vh, 600px);
    background: var(--envelope-velvet);
    border-radius: 12px;
    position: relative;
    box-shadow: 0 60px 120px rgba(0,0,0,0.9);
    overflow: hidden;
}

#envelope-bg-photo {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    filter: contrast(0.8) brightness(1.1) saturate(1.1) blur(1px);
    transition: opacity 2s ease;
    z-index: 0;
}

.envelope.open #envelope-bg-photo { opacity: 0.6; }

.envelope::before {
    content: '';
    position: absolute;
    top: 0;
    width: 100%;
    height: 70%;
    background: var(--envelope-flap);
    clip-path: polygon(0 0, 50% 100%, 100% 0);
    transform-origin: top;
    transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 6;
}

/* HEART SEAL */
.heart-seal {
    position: absolute;
    top: 60%;
    left: 50%;
    width: 180px; 
    height: 180px;
    background: white;
    clip-path: path("M90,165 C25,115 0,90 0,50 C0,20 25,0 50,0 C65,0 80,10 90,25 C100,10 115,0 130,0 C155,0 180,20 180,50 C180,90 155,115 90,165 Z");
    transform: translate(-50%, -50%);
    cursor: pointer;
    z-index: 10;
    animation: heartPulse 2.2s infinite;
    transition: 2.4s ease;
    pointer-events: auto;
}

#seal-img { width: 100%; height: 100%; object-fit: cover; filter: contrast(0.9) brightness(1.1); }

@keyframes heartPulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.08); }
}

/* LETTER STACK */
.letter-stack {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    z-index: 2;
    padding-bottom: 30px; 
}

.letter {
    position: absolute;
    width: 78%;  
    height: 60%; 
    background: var(--paper-pink) !important;
    padding: 40px;
    font-family: 'Dancing Script', cursive;
    font-size: clamp(1.4rem, 2.5vw, 2.1rem);
    color: var(--ink);
    line-height: 1.5;
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    transition: transform 1.1s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.8s ease;
    border: 1px solid #f8d7da;
    border-radius: 4px;
    opacity: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: center;
}

.letter * {
    pointer-events: none;
}

.letter.active { opacity: 1; pointer-events: auto; z-index: 10; }

.envelope.open::before { 
    transform: rotateX(180deg); 
    z-index: 1; 
    pointer-events: none;
}

.envelope.open .heart-seal { transform: translate(-50%, -220%) scale(0); opacity: 0; pointer-events: none; }
.envelope.open .letter.active { transform: translateY(-85px); opacity: 1; }

/* COUNTDOWN STYLES */
.timer-header { font-size: 1.5rem; margin-bottom: 15px; color: var(--ink); }
.live-countdown { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px; }
.timer-unit { display: flex; flex-direction: column; align-items: center; }
.timer-val { font-size: 2rem; font-weight: bold; color: var(--accent-gold); text-shadow: 0 0 10px rgba(245, 212, 145, 0.5); }
.timer-label { font-size: 0.7rem; text-transform: uppercase; color: var(--ink); opacity: 0.7; }